pipeline
{
tools{
    maven 'maven'
}
environment{
    name = 'dibya'
}
parameters{
    string defaultValue: 'barwa', name: 'lastname'
}

agent {

label 'node1'

    }
    stages{
        stage('build'){
            steps{
                sh 'mvn clean package'
                echo "Hello $name ${params.lastname}"
            }
        }
        stage('test'){
            parallel{
                stage('testA'){
                    steps{
                        echo "This is test A"
                    }
                }
                stage('testB'){
                    steps{
                        echo 'this is test B'
                   }
                }
            }
            post {
                success {
                    archiveArtifacts artifacts: '**/target/*.jar'
                }
            }
        
    }
}
